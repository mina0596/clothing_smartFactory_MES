<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/Layout"
layout:decorate="@{layout/default_rawMaterials}">

<th:block layout:fragment="pageTitle">
	   <div class="border-head"> 
	    <h3>자재 관리</h3>
	    </div>
</th:block>



<th:block layout:fragment="container">
            <div class="form-panel">
              <h4 class="mb"><i class="fa fa-edit"></i> 자재 출고 등록</h4>
              <form th:action="@{/rawMaterials/addExWarehousing}" class="form-horizontal style-form" method="post">
               
               <div class="form-group">
		          <label class="col-sm-2 col-sm-2 control-label">발주 코드 검색</label>
		          <div class="col-md-6">
		            <div  class="input-group ">
		              <input type="text" id="raw_material_order_code" class="form-control"  size="16">
		              <div class="input-group-btn">
		                <button type="button" id="search" class=" btn btn-theme03 btn btn-default"  th:href="@{/rawMaterials/getSupplierRequest}"><i class="fa"></i>검색하여 가져오기</button>
		              </div>
		            </div>
		          </div>
		        </div>
		        
		        <div class="form-group">
                  <label class="col-sm-2 col-sm-2 control-label">원부자재 코드</label>
                  <div class="col-sm-6">
                    <input type="text" id="raw_material_code" name="raw_material_transaction_amount" class="form-control" disabled="disabled" >
                  </div>
                </div>

		        <div class="form-group">
                  <label class="col-sm-2 col-sm-2 control-label">발주 담당자 코드</label>
                  <div class="col-sm-6">
                    <input type="text"  name="raw_material_transaction_amount" class="form-control" disabled="disabled" >
                  </div>
                </div>
                
		        <div class="form-group">
                  <label class="col-sm-2 col-sm-2 control-label">수량</label>
                  <div class="col-sm-6"><!-- 값 들어오고 disabled 풀어주기 -->
                    <input type="number" id="raw_material_order_amount" name="raw_material_transaction_amount" class="form-control" disabled="disabled" >
                  </div>
                </div>

      		  
				<div class="form-group">
			          <label class="col-sm-2 col-sm-2 control-label">출고일시</label>
		          <div class="col-md-6">
					<input name="expectedProductionEndDate" id="endDate" type="date" class="form-control">
		          </div>
		        </div>
      		  
      		  
		        <div class="form-group text-right">
		          <div class="col-lg-offset-2 col-lg-10">
		            <button class="btn btn-theme" type="submit"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">등록</font></font></button>
		            <a href="javascript:history.back()" class="btn btn-theme04" type="button"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">취소</font></font></a>
		          </div>
		        </div>
    		</form>            
           </div>


			<!-- ========================================= -->
 			<!--- 검색창 모달 시작 ---->
     		<div class="modal fade modal-xl"  id="bySupplierModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog" style="width:auto;display:table" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h4 class="modal-title" id="exampleModalLabel">입고 목록 검색</h4>
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      
		      <!-- 모달본문 -->
		   <div class="modal-body">
		   
		   <table  class="table table-striped table-advance table-hover">
         	<tbody>       		
       			<thead>
        			<tr>
	         			<th colspan="3" style="padding-right: 20px;">
		         			 <div class="form-inline" style="margin-bottom: 0px;">
		         			 	<label class="control-label">발주 코드</label>&nbsp
			                	<input type="text" class="form-control" id="bySupplierValue" placeholder="검색어를 입력하세요.">
			                </div>
	         			</th>
	         			<th colspan="2" style="padding-right: 20px;">
	         				<div class="form-inline" style="margin-bottom: 0px;">
		         				<label class="control-label">거래처명</label>&nbsp
			                	<input type="text" class="form-control" id="exampleInputPassword2" placeholder="검색어를 입력하세요.">
		              		</div>
	         			</th>  
	         			<th colspan="2" style="padding-right: 20px;">
	         				<div class="form-inline" style="margin-bottom: 0px;">
		         				<label class="control-label">품목명</label>&nbsp
			                	<input type="text" class="form-control" id="exampleInputPassword2" placeholder="검색어를 입력하세요.">
		              		</div>
	         			</th>  
	         			<th colspan="5" style="padding-right: 20px;">
	         				<div class="form-inline" style="margin-bottom: 0px;">
		         				<label class="control-label">발주 날짜</label>&nbsp
			                	<input type="date" class="form-control" id="exampleInputPassword2" placeholder="검색어를 입력하세요.">&nbsp ~
			                	<input type="date" class="form-control" id="exampleInputPassword2" placeholder="검색어를 입력하세요.">
	         				 &nbsp&nbsp&nbsp <button type="submit" class="btn btn-theme">검색</button>
		              		</div>
	         			</th>  
        			</tr>     			
       			</thead>
       			<tbody style="text-align: center;">
       				<tr>
       					<td><i class="fa fa-check"></i></td>
       					<td>발주코드</td>
       					<td>원부자재 코드</td>
       					<td>거래처명</td>
       					<td>품목명</td>
       					<td>색상명</td>
       					<td>특징</td>
       					<td>수량</td>
       					<td>입고예정일</td>
       					<td>발주일자</td>
       				</tr>
       				
     				<tr>
     					<td><input type="radio" name="bySupplierModal"></td>
       					<td class="raw_material_order_code"></td>
       					<td class="raw_material_code"></td>
       					<td></td>
       					<td class="raw_material_name"></td>
       					<td class="raw_material_color_name"></td>
       					<td class="raw_material_feature"></td>
       					<td class="raw_material_order_amount"></td>
       					<td></td>
       					<td></td>
     				</tr>
       			</tbody>        		
         	</tbody>
         </table> 
         
		 </div>
		    <div class="modal-footer">
			      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			      <button type="button" id="saveSupplier" class="btn btn-primary" data-dismiss="modal">Save changes</button>
		      </div>
		    </div>
		  </div>
		</div>
     
      <script type="text/javascript">
				$('#search').click(function(){
					$('#bySupplierModal').modal("show");
					
					var approval = '승인';
					console.log(approval);
					$.ajax({
						url: "getSupplierRequest",
						method : 'get',
						async: true,
						dataType : "json",
						data : {'approval' : approval},
						success: function(data){
							if(data != null && data != '' && data != undefined){
								for(var i=0; i<data.length; i++){
									console.log(data[i]);
								}
							}
						}	
					});
					
				 	$('#saveSupplier').click(function(){
						var check = $('input[name=bySupplierModal]:checked');
						var checkTr = check.parent().parent();
						var raw_material_order_code = checkTr.find('.raw_material_order_code').text();
						var raw_material_code = checkTr.find('.raw_material_code').text();
						var raw_material_feature = checkTr.find('.raw_material_feature').text();
						var raw_material_order_amount = checkTr.find('.raw_material_order_amount').text();
						$('#raw_material_order_code').attr('value',raw_material_order_code);
						$('#raw_material_code').attr('value',raw_material_code);
						$('#raw_material_name').attr('value',raw_material_name);
						$('#raw_material_color_name').attr('value',raw_material_color_name);
						$('#raw_material_feature').attr('value',raw_material_feature);
						$('#raw_material_order_amount').attr('value',raw_material_order_amount);
						$('#raw_material_order_amount').attr('disabled',false);
					}); 
				});	
				
     </script>
     </th:block>

</html>